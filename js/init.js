$(document).ready(function(){var baseurl="http://www.sagmeisterwalsh.com/";var iconpinurl=baseurl+"img/system/sw-map-marker.png";var camurl="http://www.sagmeisterwalsh.com/webcam/upload/webcam-new.jpg";var camera=true;var uiready=false;var easing="easeInOutQuart";var fullstate=false;var scrollBarWidth=0;scrollBarWidth=window.innerWidth-$("body").width();if(!isCanvasSupported()){var viewportHeight=$(window).height();var viewportWidth=$(window).width()}else{var viewportHeight=$(window).height();var viewportWidth=$(window).width()+scrollBarWidth}var viewportRatio=viewportWidth/viewportHeight;function isCanvasSupported(){var elem=document.createElement("canvas");return !!(elem.getContext&&elem.getContext("2d"))}var device;function checkdevice(){device=$("body").attr("class")}checkdevice();var pushstate="push";var replacePage=function(url){if(typeof(window.history.pushState)=="function"&&pushstate=="push"&&device!="mobile"&&device!="tablet"){pushstatetransitionspeedadjusted=150;pushstatetransitionalpha=1;t=$("#header-bg .drop-nav");closemenu(t,0);$("#partialblock").show().fadeTo(0,0).fadeTo(pushstatetransitionspeedadjusted,pushstatetransitionalpha,function(){bodyscrollto(0,0,easing);$.ajax({url:url,type:"get",dataType:"html",success:function(data){var $response=$(data);oneval=$response.find("#content").html();twoval=$response.find("#footer").html();targetTitle=$response.filter("title").text();templateClass=$response.find("#content").parent().attr("class");templateId=$response.find("#content").parent().attr("id");if(window.location.hash){}else{$("body, html").scrollTop(0)}$("#content").empty().append(oneval);$("#footer").empty().append(twoval);$("body div:eq(0)").attr("class",""+templateClass+"").attr("id",""+templateId+"");$("#partialblock").fadeTo(300,1).fadeTo(pushstatetransitionspeedadjusted,0,function(){$("#partialblock").hide()});document.title=targetTitle;reInit()}})})}else{window.location.href=url}};if(pushstate=="push"){History.Adapter.bind(window,"statechange",function(){var State=History.getState();replacePage(State.url)});$("a.history, .history a").live("click",function(e){e.preventDefault();if(uiready==true){uiready=false;if(typeof(window.history.pushState)=="function"&&pushstate=="push"){replacepagetype="click";History.pushState({state:1,rand:Math.random()},null,this.href)}else{window.location.href=this.href}}})}function prepreloading(){$("#content img").each(function(){parentwidth=$(this).parent().width();imgwidth=$(this).attr("width");imgheight=$(this).attr("height");imgdim=imgwidth/imgheight;hh=parentwidth/imgdim;hh=Math.round(hh);$(this).width(parentwidth);$(this).height(hh)})}function preloadimages(){$("#content .image-holder img, #content .thumb img").each(function(i){var fuck=$(this);setTimeout(function(){if(fuck.hasClass("loaded")){}else{fuck.parent().prepend('<div class="slide-spinn">&nbsp;</div>')}},500)});$("#content img").fadeTo(0,0).imgpreload({each:function(){if($(this).parent().is("#cam-img")){$("#cam-img img").fadeTo(300,1,function(){$(".slide-spinn").fadeTo(200,0,function(){$(this).remove()})})}else{$(this).css({width:"100%",height:"auto"}).addClass("loaded").fadeTo(300,1,function(){$(this).parent().find(".slide-spinn").fadeTo(200,0,function(){$(this).remove()})})}},all:function(){isoiso();resize();refreshintroimg()}})}var minispeed=0;var minispeed=150;$(".mini-slideshow .t-next").live("click",function(e){e.preventDefault();id=$(this).parent().parent().find(".thumb-img-sources");thumb=$(this).parent().find(".thumb img");count=id.find("img").length;par=$(this).parent();s=$(this).parent().attr("data-slide");s=eval(s);s++;thumb.fadeTo(minispeed,0,easing,function(){if(s<count){newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}else{s=0;newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}thumb.fadeTo(minispeed,1,easing)})});$(".mini-slideshow .t-prev").live("click",function(e){e.preventDefault();id=$(this).parent().parent().find(".thumb-img-sources");thumb=$(this).parent().find(".thumb img");count=id.find("img").length;par=$(this).parent();s=$(this).parent().attr("data-slide");s=eval(s);s--;thumb.fadeTo(minispeed,0,easing,function(){if(s>-1){newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}else{s=count-1;newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}thumb.fadeTo(minispeed,1,easing)})});$("#content .mini-slideshow.clickactive .thumb").live("click",function(e){e.preventDefault();id=$(this).parent().parent().find(".thumb-img-sources");thumb=$(this).parent().find(".thumb img");count=id.find("img").length;par=$(this).parent();s=$(this).parent().attr("data-slide");s=eval(s);s++;thumb.fadeTo(minispeed,0,easing,function(){if(s<count){newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}else{s=0;newsrc=id.find("img:eq("+s+")").attr("src");thumb.attr("src",newsrc);par.attr("data-slide",s)}thumb.fadeTo(minispeed,1,easing)})});function resize(){countcolumns();if($("#map_canvas").length){mapheight=$("#map_canvas").width();$("#map_canvas").height(mapheight)}resizeslideshow();evenoutcol();focusactivity();n=$("a.next");var neheight=n.height()/2;n.css({"margin-top":"-"+neheight+"px"});n=$("a.prev");var neheight=n.height()/2;n.css({"margin-top":"-"+neheight+"px"});if($("#partialblock").hasClass("bleep")){}else{$("#partialblock").addClass("bleep").fadeTo(200,0,function(){$(this).hide()})}isoiso();resizeiframe()}function resizeiframe(){$("#article-images iframe, #article-grid iframe").each(function(){iwidth=$(this).attr("width");iheight=$(this).attr("height");idim=iwidth/iheight;holderwidth=$(this).parent().width();$(this).width(holderwidth).height(holderwidth/idim)})}function resizezoom(){$("#block img").each(function(){imgw=$(this).attr("width");imgh=$(this).attr("height");imgdim=imgw/imgh;viewportdim=viewportWidth/viewportHeight;if(imgdim>viewportdim){$(this).css({width:"100%",height:"auto"})}else{$(this).css({width:"auto",height:"100%"})}})}function resizeslideshow(){resizebleed()}function resizebleed(){hm=viewportHeight;wm=viewportWidth;$(".slideshow .bleed").each(function(intIndex){spaceRatio=wm/hm;spaceRatio=Math.round(spaceRatio);selectorHolder=$(this);selector=$(this).find("img");imageWidth=$(selector).attr("width");imageHeight=$(selector).attr("height");imageRatio=imageWidth/imageHeight;newHeight=0;newWidth=0;if(spaceRatio>imageRatio){newHeight=(wm/imageWidth)*imageHeight;newWidth=wm}else{newHeight=hm;newWidth=(hm/imageHeight)*imageWidth}newTop=0-((newHeight-hm)/2);newLeft=0-((newWidth-wm)/2);$(selectorHolder).height(hm).width(wm);newHeight=Math.round(newHeight);newWidth=Math.round(newWidth);if(!isCanvasSupported()){$(selector).css({height:newHeight,width:newWidth,marginTop:newTop,marginLeft:newLeft})}else{$(selector).css({height:newHeight,width:newWidth,marginTop:newTop,marginLeft:newLeft})}magicwidth=newWidth*0.521;magicheight=newHeight*0.14375;magicwidth=Math.round(magicwidth);magicheight=Math.round(magicheight);$("#magic-buttons").show().width(magicwidth).height(magicheight).css({"margin-top":"-"+magicheight/2+"px","margin-left":"-"+magicwidth/2+"px"});$("#magic-buttons .m-button a").height((magicheight/2)-5)})}function bodyscrollto(pos,s,easing){if(pos>$(document).height()-viewportHeight){pos=$(document).height()-viewportHeight}distance=$(window).scrollTop()-pos;distancenorm=1400;distanceratio=distancenorm/distance;newspeed=s/distanceratio;newspeed=Math.abs(newspeed);$("body, html").animate({scrollTop:""+pos+"px"},newspeed,easing,function(){})}var windowscrollpos=0;function whilescrolling(){if(device=="desktop"){if($("#home").length||$("#error").length||$("#newsletter").length){$("#masthead").removeClass("minified");$("#header-bg").removeClass("minified")}else{windowscrollpos=$(window).scrollTop();if(windowscrollpos>20){$("#masthead").addClass("minified");$("#header-bg").addClass("minified")}else{$("#masthead").removeClass("minified");$("#header-bg").removeClass("minified")}if($(".changer").length){ah=$(".changer").offset().top-400;if(windowscrollpos>ah){$("#scrollto-info .iconfont").html("0");$("#scrollto-info").addClass("up")}else{$("#scrollto-info .iconfont").html("1");$("#scrollto-info").removeClass("up")}}}}}function scrollstart(){t=$("#header-bg .drop-nav");closemenu(t,0)}function scrollstop(){}function bindScrollers(){$(window).bind("scrollstart",scrollstart);$(window).bind("scrollstart",scrollstop);$(window).bind("scroll",whilescrolling)}var highest=0;function sortNumber(a,b){return a-b}function iso(container,s){if($(container).is("#grid-fix")){base=$(container).parent().width();isowidth=Math.floor(base/cols);isowidthbase=Math.floor(base/4);diff=base-(isowidth*cols);if(diff==0){$(container).width(base+4)}else{if(diff==1){$(container).width(base+4)}else{if(diff==2){$(container).width(base+4)}else{if(diff==3){$(container).width(base+4)}else{$(container).width(base+4)}}}}if(cols==4){if(diff==0){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*(cols/2)));$(container).find(".iso.col-100").width((isowidth*cols))}else{if(diff==1){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*(cols/2)));$(container).find(".iso.col-50 .col-inner").css({"padding-right":"11px"});$(container).find(".iso.col-100").width((isowidth*cols)+1);isowidth++}else{if(diff==2){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*(cols/2)));$(container).find(".iso.col-100").width((isowidth*cols)+2);isowidth++}else{if(diff==3){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*(cols/2))+1);$(container).find(".iso.col-100").width((isowidth*cols)+3);isowidth++}}}}}else{if(cols==3){if(diff==0){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width(((isowidth*cols)/2)+0);$(container).find(".iso.col-100").width((isowidth*cols));isowidth++}else{if(diff==1){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols)/2);$(container).find(".iso.col-100").width((isowidth*cols)+1);isowidth++}else{if(diff==2){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width(((isowidth*cols)/2)+1);$(container).find(".iso.col-100").width((isowidth*cols)+2);isowidth++}else{if(diff==3){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols)/2);$(container).find(".iso.col-100").width((isowidth*cols)+2);isowidth++}}}}}else{if(cols==2){if(diff==0){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols))}else{if(diff==1){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols)+1);$(container).find(".iso.col-100").width((isowidth*cols)+1)}else{if(diff==2){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols));isowidth++}else{if(diff==3){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols));isowidth++}}}}}else{if(cols==1){if(diff==0){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols))}else{if(diff==1){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols))}else{if(diff==2){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols));isowidth++}else{if(diff==3){$(container).find(".iso.col-25").width(isowidth);$(container).find(".iso.col-50").width((isowidth*cols));$(container).find(".iso.col-100").width((isowidth*cols));isowidth++}}}}}}}}guttfeeling=isowidth;if(cols==3){guttfeeling=(isowidth*3)/2}else{if(cols==2){guttfeeling=isowidth}else{if(cols==1){guttfeeling=isowidth}}}$(container).isotope({itemSelector:".iso",resizable:false,masonry:{columnWidth:(guttfeeling)},animationEngine:"jquery",transformsEnabled:false,animationOptions:{duration:s,easing:easing,queue:false},hiddenStyle:{opacity:0,scale:1}})}else{base=$(container).width();isowidth=Math.floor(base/cols);$(container).find(".iso").width(isowidth);$(container).isotope({itemSelector:".iso",resizable:false,masonry:{columnWidth:base/cols},animationEngine:"jquery",transformsEnabled:false,animationOptions:{duration:s,easing:easing,queue:false},hiddenStyle:{opacity:0,scale:1}})}}function isoiso(){iso(".isodope",0)}var cols=4;function countcolumns(){w=viewportWidth;if(w>1000){cols=4}else{if(w>800&&w<1001){cols=3}else{if(w>600&&w<801){cols=2}else{if(w>400&&w<601){cols=1}else{cols=1}}}}}function evenoutcol(){$(".adjust .col").find("p:last").addClass("nobottommargin");$(".adjust .col").find(".section:last").addClass("nobottommargin");$(".adjust #article-images .col-inner").find("img:last").addClass("nobottommargin");$("#article .col-inner").find("p:last").addClass("nobottommargin");if(cols==4){var heights=new Array();$(".adjust div.col").each(function(){$(this).css("height","auto");heights.push($(this).height());heights=heights.sort(sortNumber).reverse()});highest=heights[0];$(".adjust div.col").each(function(){$(this).css("height",highest)})}else{$(".adjust div.col").each(function(){$(this).css("height","auto")})}}function changetagline(){random="q"+Math.ceil(Math.random()*quoteCount);random=eval(random);$(".tagline").fadeTo(500,0,easing,function(){$(this).html(""+random+"").fadeTo(0,0).fadeTo(500,1)})}function initialize(){if($("#map_canvas").length){var SagmeisterWalsh=new google.maps.LatLng(40.744179,-73.996177);var myOptions={backgroundColor:"#eeeeee",panControl:false,zoomControl:true,mapTypeControl:false,scaleControl:false,streetViewControl:false,overviewMapControl:false,center:SagmeisterWalsh,zoom:14,panControl:false,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},scaleControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP};var map=new google.maps.Map(document.getElementById("map_canvas"),myOptions);var style=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{lightness:0}]}];map.setOptions({styles:style});var marker=new google.maps.Marker({position:SagmeisterWalsh,map:map,title:"Sagmeister & Walsh",icon:iconpinurl})}}$("#newsletter").height(viewportHeight);function preinit(){checkdevice();prepreloading();isoiso();preloadimages();resize();bindScrollers();changetagline();whilescrolling()}preinit();window.clearInterval(intervalID);var intervalID=setInterval(changetagline,10000);function init(){uiready=true;resize();$("a.prev, a.next").fadeTo(300,1);initialize();whilescrolling()}function reInit(){uiready=true;prepreloading();bindScrollers();resize();preloadimages();checkdevice();whilescrolling();window.clearInterval(intervalID);intervalID=setInterval(changetagline,10000);changetagline();$("a.prev, a.next").fadeTo(300,1);initialize()}function bindkeys(){shortcut.add("Left",function(){if($("#prev-project").length&&fullstate==false){$("#prev-project").trigger("click")}else{if(fullstate==true){$("#block .block-left").trigger("click")}}});shortcut.add("Right",function(){if($("#next-project").length&&fullstate==false){$("#next-project").trigger("click")}else{if(fullstate==true){$("#block .block-right").trigger("click")}}})}bindkeys();function unbindkeys(){shortcut.remove("Left");shortcut.remove("Right")}$("input, textarea").on("focus",function(){unbindkeys()});$("input, textarea").on("blur",function(){bindkeys()});function refreshintroimg(){if(!isCanvasSupported()||camera==false){}else{if($("#home").length){if(device=="mobile"||device=="tablet"){}else{s=camurl;var timestamp=new Date().getTime();newsrc=s+"?when="+timestamp;$.imgpreload(newsrc,{each:function(){imgcount=$("#cam-img img").length;if(imgcount<2){peep=$("#cam-img img").clone();$("#cam-img").append(peep);$("#cam-img img:last").attr("src",newsrc).fadeTo(0,0);var tttime=setTimeout(function(){imgcount=$("#cam-img img").length;if(imgcount==2&&$("#home").length){$("#cam-img img:first").remove();$("#cam-img img").fadeTo(0,1);$(".slide-spinn").fadeTo(0,0,function(){$(this).remove()});refreshintroimg()}else{var wwwime=setTimeout(function(){$("#cam-img img").fadeTo(300,1);$(".slide-spinn").fadeTo(200,0,function(){$(this).remove()});refreshintroimg()},7000)}},10000)}},all:function(){}})}}}}function focusactivity(){if(cols>2){$(".image-holder").addClass("available")}else{$(".image-holder").removeClass("available")}}$("#article-grid .image-holder.focus").live("click",function(e){e.preventDefault();focusactivity();index=$("#article-grid .image-holder.focus").index($(this));if(cols>2){fullstate=true;if($(this).parent().find("iframe").length){}else{src=$(this).find("img").attr("src");srcw=$(this).find("img").attr("width");srch=$(this).find("img").attr("height");$("#block .slideshow").html('<div class="slide media left image bleed"><img src="'+src+'" width="'+srcw+'" height="'+srch+'"></div>');resizeslideshow();$("body").addClass("disable");$(this).parent().parent().parent().parent().attr("data-count",""+index+"");$("#block").fadeTo(0,1,function(){})}}else{}});$("#block .block-right").live("click",function(e){total=$("#article-grid .image-holder.focus").length;current=$("#article-grid").attr("data-count");next=current;if(next<(total-1)){next++}else{next=0}$("#article-grid .image-holder.focus:eq("+next+")").trigger("click")});$("#block .block-left").live("click",function(e){total=$("#article-grid .image-holder.focus").length;current=$("#article-grid").attr("data-count");prev=current;if(prev>0){prev--}else{prev=total-1}$("#article-grid .image-holder.focus:eq("+prev+")").trigger("click")});$("#block .focus-close").live("click",function(e){e.preventDefault();fullstate=false;$("#block").fadeTo(0,1,function(){$("#block .slideshow").empty();$("#block").hide();$("body").removeClass("disable")})});$("#icons .search a").live("click",function(e){e.preventDefault();$("#overlay-bg").fadeTo(0,1,function(){$("#search-box").show()})});$("#icons .newsletter a").live("click",function(e){e.preventDefault();$("#newsletter-form").show();$("#overlay-bg").fadeTo(0,1,function(){})});$("a.download-button.logged_out").live("click",function(e){e.preventDefault();$("#download-form").show();$("#overlay-bg").fadeTo(0,1,function(){})});$("#overlay-closey, #overlay-bg, #newsletter-form .close, #download-form .close").live("click",function(e){e.preventDefault();$("#search-box").hide();$("#download-form").hide();$("#newsletter-form").hide();$("#overlay-bg").fadeTo(0,0,function(){$(this).hide()})});$("#scrollto-info").live("click",function(e){e.preventDefault();if(!$(this).hasClass("up")){pos=$(".changer").offset().top-144;bodyscrollto(pos,1000,easing)}else{pos=0;bodyscrollto(pos,1000,easing)}});var menuready=true;function openmenu(t,s){if(menuready==true){menuready=false;t.find(".toggle").slideDown(s,easing,function(){t.addClass("out");menuready=true})}}function closemenu(t,s){if(menuready==true){menuready=false;t.find(".toggle").slideUp(s,easing,function(){t.removeClass("out");menuready=true})}}if(device=="mobile"||device=="tablet"){$("#header-bg .drop-nav a.show").live("click",function(e){t=$(this).parent();if(t.hasClass("out")){if(device=="mobile"||device=="tablet"){closemenu(t,0)}else{closemenu(t,250)}}else{if(device=="mobile"||device=="tablet"){openmenu(t,0)}else{openmenu(t,250)}}})}else{$("#header-bg .drop-nav").live("mouseenter mouseleave",function(event){if(event.type=="mouseenter"){t=$(this).parent();openmenu(t,250)}else{t=$(this).parent();closemenu(t,250)}})}$("#header-bg .drop-nav .toggle a").live("click",function(e){t=$(this).parent().parent();closemenu(t,0)});$(".overlay, #overlay #close").live("click",function(){$("#overlay").toggleClass("open")});$(".opener, #overlay #close").live("click",function(){$("#info").toggleClass("open")});$("img.swap").live("mouseover mouseout",function(e){if(e.type=="mouseover"){swapsrc=$(this).attr("src");newswapsrc=$(this).attr("data-swap");$(this).attr("src",newswapsrc);$(this).attr("data-swap",swapsrc)}else{swapsrc=$(this).attr("src");newswapsrc=$(this).attr("data-swap");$(this).attr("src",newswapsrc);$(this).attr("data-swap",swapsrc)}});var nextprevstate=true;if(device=="mobile"||device=="tablet"){}else{$("#next-project").live("mouseover mouseleave",function(e){if(e.type=="mouseover"){if(nextprevstate==true){nextprevstate=false;$(this).animate({right:"0px"},150,easing,function(){nextprevstate=true})}}else{$(this).animate({right:"-68px"},150,easing,function(){})}})}if(device=="mobile"||device=="tablet"){}else{$("#prev-project").live("mouseover mouseleave",function(e){if(e.type=="mouseover"){if(nextprevstate==true){nextprevstate=false;$(this).animate({left:"0px"},150,easing,function(){nextprevstate=true})}}else{$(this).animate({left:"-68px"},150,easing,function(){})}})}$("#news.grid #content .col, #store.grid #content .col").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).find(".mini-title").show().fadeTo(0,0).fadeTo(150,1,function(){});$(this).find(".mini-title-bottom").show().fadeTo(0,0).fadeTo(150,1,function(){})}else{$(this).find(".mini-title").fadeTo(150,0,function(){$(this).find(".mini-title").hide()});$(this).find(".mini-title-bottom").fadeTo(150,0,function(){$(this).find(".mini-title-bottom").hide()})}});$(window).resize(function(){if(!isCanvasSupported()){viewportHeight=$(window).height();viewportWidth=$(window).width()}else{viewportHeight=$(window).height();viewportWidth=$(window).width()+scrollBarWidth}viewportRatio=viewportWidth/viewportHeight;resize()});$(window).load(function(){init()})});